;color=#6600FF

[Ultrahand - Update]

try:
download https://github.com/ppkantorski/Ultrahand-Overlay/releases/latest/download/ovlmenu.ovl /switch/.overlays/ovlmenu.ovl
download https://github.com/ppkantorski/Ultrahand-Overlay/releases/latest/download/lang.zip /config/ultrahand/downloads/Ryazhenkabestcfw Tuner/downloads.zip
unzip /config/ultrahand/downloads/Ryazhenkabestcfw Tuner/downloads.zip /config/ultrahand/lang/

del /config/ultrahand/downloads/Ryazhenkabestcfw Tuner/


[Ryazhenkabestcfw Tuner - Update]

try:
ini_file '/switch/.packages/Ryazhenkabestcfw Tuner/package.ini'
json '[{"null":"main", "main":"main", "test":"test"}]'
download 'https://github.com/Dimasick-git/Ryazhenkabestcfw-Tuner/releases/download/Ryazhenkabestcfw_Tuner' /config/ultrahand/downloads/Ryazhenkabestcfw Tuner/downloads.zip
unzip /config/ultrahand/downloads/Ryazhenkabestcfw_Tuner/downloads.zip /config/ultrahand/downloads/Ryazhenkabestcfw Tuner/
mv '/switch/.packages/Ryazhenkabestcfw Tuner/config.ini' '/config/ultrahand/downloads/Ryazhenkabestcfw Tuner/Ryazhenkabestcwf-Tuner-{json(0,{ini_file(Header,;tuner)})}/config.ini'
mv '/switch/.packages/Ryazhenkabestcfw Tuner/Data/Presets/config.ini' '/config/ultrahand/downloads/Ryazhenkabestcfw Tuner/Ryazhenkabestcfw-Tuner-{json(0,{ini_file(Header,;tuner)})}/Data/Presets/config.ini'
mv '/config/ultrahand/downloads/Ryazhenkabestcfw Tuner/Ryazhenkabestcfw-Tuner-{json(0,{ini_file(Header,;tuner)})}/' '/config/ultrahand/downloads/Ryazhenkabestcfw Tuner/Ryazhenkabestcfw Tuner/'
del '/switch/.packages/Ryazhenkabestcfw Tuner/'
mv '/config/ultrahand/downloads/Ryazhenkabestcfw Tuner/Ryazhenkabestcfw Tuner/' '/switch/.packages/Ryazhenkabestcfw Tuner/'

mv ./boot_package.ini ./boot_package-bak.ini
cp '/switch/.packages/Ryazhenkabestcfw Tuner/boot_package.ini' ./boot_package.ini
exec boot
exec update
mv ./boot_package-bak.ini ./boot_package.ini

del /config/ultrahand/downloads/Ryazhenkabestcfw Tuner/

refresh



[Auto Update sys-clk]
try:
    # Удаляем ВСЕ старые версии sys-clk (на всякий случай)
    del /switch/.overlays/sys-clk.ovl
    del /switch/.overlays/sysclk.ovl
    del /switch/.overlays/sys-clk-overlay.ovl  # если был старый — тоже убираем перед установкой нового
    del /switch/.packages/sys-clk/            # если кто-то ставил через .packages — удаляем папку
    del /switch/.packages/sysclk/             # резервный вариант
    del /switch/.overlays/Ryazha-clk-overlay.ovl
    # Ставим новый
    download https://github.com/Ryazhenka-Helper-1/Sys-clk-for-RYZ/releases/latest/download/sys-clk-overlay.ovl /switch/.overlays/sys-clk-overlay.ovl
    refresh


[Loader OC - Update]
try:
    mv ./boot_package.ini ./boot_package-bak.ini
    cp /switch/.packages/Ryazhenkabestcfw\ Tuner/Data/Presets/boot_package.ini ./boot_package.ini
    exec backup
    mv /atmosphere/kips/.bak/Current.ini /atmosphere/kips/.bak/Temp.ini
    
    download https://github.com/Dimasick-git/Ryazhenkabestcfw-Tuner/releases/latest/download/loader.kip /atmosphere/kips/loader.kip
    
    ini_file /atmosphere/kips/.bak/Temp.ini
    json '[{"null":"restore", "Meha-2.0.0rc6²":"converter-old", "Meha-2.0.0rc6²-S":"converter-old", "B3711-Switchcraft-1.1.1":"converter-1.3.6", "B3711-1.3.3":"converter-1.3.6", "B3711-1.3.6":"converter-1.3.6", "SC-1.4.0":"converter-1.4.0", "SC-1.4.4":"converter-1.4.4", "SC-1.5.1":"converter-1.5.1", "SC-1.6.0":"converter-1.6.0", "SC-1.6.4":"converter-1.6.4", "SC-1.6.8":"restore"}]'
    set-ini-val "/switch/.packages/Ryazhenkabestcfw Tuner/config.ini" "Backup" "Version" "{json(0,{ini_file(Backup,Version)})"
    ini_file "/switch/.packages/Ryazhenkabestcfw Tuner/config.ini"
    exec "{ini_file(Backup,Version)}"
    exec restore
    
    mv ./boot_package-bak.ini ./boot_package.ini
    exec patch
    del /atmosphere/kips/.bak/Temp.ini
